# PostgreSQL Database configuration
POSTGRES_URL=postgresql://postgres:yourpassword@localhost:5432/ingestion

# Connection pool sizing
# The pool size is auto-calculated based on NUM_WORKERS to prevent "too many clients" errors
# Formula: max_pool_size >= NUM_WORKERS * 3 + 10
# If you have many workers, ensure PostgreSQL max_connections is sufficient
# Default PostgreSQL max_connections is 100
POOL_MIN_SIZE=5
POOL_MAX_SIZE=20

# Server configuration
HOST=0.0.0.0
PORT=8080

# Document paths
DOCUMENTS_PATH=Documents

# Qdrant configuration
QDRANT_HOST=localhost
QDRANT_PORT=6333
COLLECTION_NAME=fetchcraft_chatbot

# MongoDB configuration
MONGO_URI=mongodb://localhost:27017
DOCUMENT_DB=fetchcraft

# Docling server
DOCLING_SERVER=http://localhost:8001

# Callback base URL for async parsing
# This should be the externally accessible URL of this admin server
CALLBACK_BASE_URL=http://localhost:8080

# Embeddings configuration
EMBEDDING_MODEL=bge-m3
EMBEDDING_API_KEY=sk-321
EMBEDDING_BASE_URL=

# Chunking configuration
CHUNK_SIZE=8192
CHILD_CHUNKS=4096,1024
CHUNK_OVERLAP=200

# Hybrid search
ENABLE_HYBRID=true
FUSION_METHOD=rrf

# Worker configuration
# Number of concurrent workers for processing documents
# NOTE: Connection pool will be auto-sized based on this value
# Formula: max_pool_size >= NUM_WORKERS * 3 + 10
# Ensure PostgreSQL max_connections is sufficient for your worker count
NUM_WORKERS=4
